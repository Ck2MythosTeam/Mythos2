###################################
#
# Events for Religion
#
########################################
# HERESIES
########################################

# Heresy appears out of "nowhere"
province_event = {
	id = 39000
	desc = "EVTDESC39000"
	picture = "GFX_evt_stone_church"
	border = "GFX_event_normal_frame_religion"
	
	lacks_dlc = "Sons of Abraham"
	
	trigger = {
		is_heretic = no
		has_heresies = yes
		NOT = { province_id = 333 } # Rome
		NOT = { province_id = 497 } # Thrace
		NOT = { province_id = 719 } # Mecca
		
		# Some religions only have heresies in certain situations
		# Hellenic
		OR = {
			NOT = { religion = hellenic_pagan }
			has_global_flag = roman_paganism_revived
		}
		# Atenism - needs specific provinces or a flag set. Happening on those provinces sets the flag
		OR = {
			NOT = { religion = kemetic_pagan }
			has_global_flag = atenist_revived
			AND = {
				c_asyut = {
					OR = {
						religion = kemetic_pagan
						religion = atenist
					}
				}
				OR = {
					kemetic_pagan = { num_of_holy_sites = 3 }
					AND = {
						kemetic_pagan = { num_of_holy_sites = 2 }
						atenist = { num_of_holy_sites = 1 }
					}
					AND = {
						kemetic_pagan = { num_of_holy_sites = 1 }
						atenist = { num_of_holy_sites = 2 }
					}
					atenist = { num_of_holy_sites = 3 }
				}
			}
		}
		# Draconic - needs to be reformed.  Only can become Black Flame if a flag is set, which can randomly happen through Black Flame events, not yet implemented.
		# Norse only has heresies if it's reformed or you meet conditions for Jotnar to spread
		OR = {
			NOT = { religion = norse_pagan }
			has_global_flag = norse_reformation
			culture = jotunn
			holder_scope = {
				OR = { 
					trait = giant 
					religion = jotnar
					religion = jotnar_reformed
				}
			}
			any_neighbor_province = {
				OR = {
					religion = jotnar
					religion = jotnar_reformed
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 9600
		modifier = {
			factor = 2.0
			religion_authority = 0.6
		}
		modifier = {
			factor = 2.0
			religion_authority = 0.8
		}
		modifier = {
			factor = 2
			has_game_rule = {
				name = religious_conversion
				value = slower
			}
		}
		modifier = {
			factor = 0.75
			NOT = { religion_authority = 0.2 }
		}
		modifier = {
			factor = 0.75
			NOT = { religion_authority = 0.4 }
		}
	}
	
	immediate = {
		if = {
			limit = { religion = norse_pagan_reformed }
			religion = norse_pagan
		}
		else_if = {
			limit = { religion = norse_pagan }
			religion = norse_pagan_reformed
		}
		else_if = {
			limit = { religion = jotnar_reformed }
			religion = jotnar
		}
		else_if = {
			limit = { religion = jotnar }
			religion = jotnar_reformed
		}
		else = {
			become_heretic = yes
		}
		set_province_flag = heresy_in_province
		add_province_modifier = {
			name = religious_unrest
			duration = 730
		}
		owner = {
			if = {
				limit = { ai = no }
				chronicle = {
					entry = CHRONICLE_HERESY_SPREAD
					picture = GFX_evt_heretic
				}
			}
		}
		owner = {
			any_liege = {
				if = {
					limit = { ai = no }
					chronicle = {
						entry = CHRONICLE_HERESY_SPREAD
						picture = GFX_evt_heretic
					}
				}
			}
		}
		if = {
			limit = {
				religion = atenist
				NOT = { has_global_flag = atenist_revived }
			}
			set_global_flag = atenist_revived
		}
	}
	
	option = {
		name = {
			text = "EVTOPTA39000"
			trigger = { owner = { NOT = { religion = ROOT } } }
		}
		name = {
			text = "EVTOPTB39000"
			trigger = { owner = { religion = ROOT } }
		}
		if = {
			limit = { 
				ruler = { is_parent_religion = ROOT }
			}
			ruler = { piety = -10 }
		}
		if = {
			limit = {
				owner = {
					top_liege = {
						NOT = {
							any_realm_province = {
								religion = ROOT
								has_province_modifier = heretic_stronghold
							}
						}
					}
				}
			}
			add_province_modifier = {
				name = heretic_stronghold
				duration = 3650
			}
		}
		# News spread
		hidden_tooltip = {
			owner = {
				top_liege = {
					if = {
						limit = {
							NOT = { character = PREV }
						}
						character_event = { id = 39400 days = 2 }
					}
					any_vassal = {
						limit = {
							OR = {
								is_parent_religion = ROOT
								religion = ROOT
							}
						}
						character_event = { id = 39400 days = 2 }
					}
				}
			}
		}
	}
}


##########################
### Proselytize Events ###
##########################

# Preacher Arrives
character_event = {
	id = 39600
	desc = EVTDESC39600
	picture = GFX_evt_heretic
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA39600 # Throw the preacher in jail
		ai_chance = {
			factor = 2
			# Always allow them if you already like that religion
			modifier = {
				factor = 0
				FROM = { religion_group = christian }
				trait = sympathy_christendom
			}
			modifier = {
				factor = 0
				FROM = { religion_group = muslim }
				trait = sympathy_islam
			}
			modifier = {
				factor = 0
				FROM = { religion_group = jewish_group }
				trait = sympathy_judaism
			}
			modifier = {
				factor = 0
				FROM = { religion_group = zoroastrian_group }
				trait = sympathy_zoroastrianism
			}
			modifier = {
				factor = 0
				FROM = { religion_group = indian_group }
				trait = sympathy_indian
			}
		}
		
		FROM = {
			imprison = ROOT
			liege = {
				set_character_flag = ai_failed_mission # AI flag - used in the code
				opinion = {
					modifier = opinion_imprisoned_missionary
					who = ROOT
				}
				hidden_tooltip = {
					reverse_opinion = {
						modifier = opinion_sent_preacher
						who = ROOT
					}
					character_event = { id = 39605 days = 1 }
				}
			}
		}
		custom_tooltip = { text = preacher_imprisoned }
	}
	option = {
		name = EVTOPTB39600 # Allow them to preach
		ai_chance = {
			factor = 1
			
			# Traits
			modifier = {
				factor = 0.3
				trait = zealous
			}
			modifier = {
				factor = 3
				trait = cynical
			}
			modifier = {
				factor = 2
				trait = arbitrary
			}
			modifier = {
				factor = 0.1
				trait = god
			}
			
			# Personal
			modifier = {
				factor = 0.3
				FROM = {
					is_rival = ROOT
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					any_spouse = {
						religion = FROM
						reverse_opinion = { who = ROOT value = 50 }
					}
					any_consort = {
						religion = FROM
						reverse_opinion = { who = ROOT value = 50 }
					}
					any_lover = {
						religion = FROM
						reverse_opinion = { who = ROOT value = 50 }
					}
					any_child = {
						religion = FROM
						reverse_opinion = { who = ROOT value = 50 }
					}
				}
			}
			
			# Political
			modifier = {
				factor = 0.2
				any_vassal = {
					religion = ROOT
					controls_religion = yes
				}
			}
			modifier = {
				factor = 0.1
				any_war = {
					using_cb = religious
					attacker = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 0.1
				any_war = {
					using_cb = pagan_holy_war
					attacker = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 0.1
				any_war = {
					using_cb = viking_invasion
					attacker = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 4
				any_war = {
					using_cb = religious
					defender = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 4
				any_war = {
					using_cb = crusade
					defender = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 2
				any_realm_province = {
					religion = FROM
				}
			}
			
			# Historical			
			modifier = {
				factor = 2
				NOT = { government = nomadic_government }  # We're already adopting civilized ways...
				NOT = { government = tribal_government }
			}
			modifier = {
				factor = 0.2
				OR = {
					culture = old_saxon
					culture_group = baltic
					culture_group = finno_ugric  # The most stubborn pagans
				}
				
			}
			modifier = {
				factor = 0.2
				culture_group = east_slavic # Like alcohol
				FROM = {
					religion_group = muslim
				}
			}
			modifier = {
				factor = 0.2
				culture_group = north_germanic # Vikings do like their alcohol
				FROM = {
					religion_group = muslim
				}
			}
			
			# Pragmatism
			modifier = {
				factor = 3  # Powerful rulers want a modern religion
				tier = KING
				realm_size = 12
			}
			modifier = {
				factor = 5
				is_reformed_religion = no
				primary_title = { has_law = tribal_organization_4 }  # Need it to reform government
				capital_holding = {
					OR = {
						AND = {
							location = {
								port = yes
							}
							OR = {
								AND = {
									holding_type = tribal
									has_building = tb_market_town_4
								}
								holding_type = city
							}
						}
						AND = {
							holding_type = tribal
							has_building = tb_hillfort_4
						}
						holding_type = castle
					}
				}
			}
			modifier = {
				factor = 0.2
				is_reformed_religion = no
				OR = {
					AND = {
						any_realm_title = {
							count = 3 
							is_holy_site = ROOT  # Close to reforming own religion instead
						}
						religion_authority = 0.4
					}
					religion_authority = 0.65 # Just very high authority, doing well
				}
			}
			modifier = {
				factor = 2
				any_realm_province = {
					any_neighbor_province = {
						owner = {
							top_liege = {
								religion = FROM
								relative_power = { who = ROOT power = 2.0 } # Powerful neighbor of that religion
							}
						}
					}
				}
			}
			modifier = {
				factor = 0.2
				NOR = {
					religion = tengri_pagan
					religion = aztec
					any_realm_province = {
						any_neighbor_province = {
							owner = {
								top_liege = {
									NAND = {
										religion_group = pagan_group
										is_reformed_religion = no
									}
									any_realm_province = { TECH_RECRUITMENT = 4 } # More cocky when pagan homeland attrition effect is active against neighbors
								}
							}
						}
					}
				}
			}
		}
		
		FROM = {
			liege = {
				opinion = {
					modifier = opinion_allowed_missionary
					who = ROOT
				}
			}
			hidden_tooltip = {
				character_event = { id = 39612 days = 1 }
			}
		}
		custom_tooltip = { text = preacher_allowed }
	}
}

# Convert?
character_event = {
	id = 39601
	desc = EVTDESC39601
	picture = GFX_evt_heretic
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA39601
		trigger = { NOT = { trait = god } }
		ai_chance = {
			factor = 1
			# Traits
			modifier = {
				factor = 0.3
				trait = zealous
			}
			modifier = {
				factor = 3
				trait = cynical
			}
			modifier = {
				factor = 2
				trait = arbitrary
			}
			modifier = {
				factor = 3
				FROM = { religion_group = christian }
				trait = sympathy_christendom
			}
			modifier = {
				factor = 3
				FROM = { religion_group = muslim }
				trait = sympathy_islam
			}
			modifier = {
				factor = 3
				FROM = { religion_group = jewish_group }
				trait = sympathy_judaism
			}
			modifier = {
				factor = 3
				FROM = { religion_group = zoroastrian_group }
				trait = sympathy_zoroastrianism
			}
			modifier = {
				factor = 3
				FROM = { religion_group = indian_group }
				trait = sympathy_indian
			}
			
			# Personal
			modifier = {
				factor = 0.3
				FROM = {
					is_rival = ROOT
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					any_spouse = {
						religion = FROM
						reverse_opinion = { who = ROOT value = 50 }
					}
					any_consort = {
						religion = FROM
						reverse_opinion = { who = ROOT value = 50 }
					}
					any_lover = {
						religion = FROM
						reverse_opinion = { who = ROOT value = 50 }
					}
					any_child = {
						religion = FROM
						reverse_opinion = { who = ROOT value = 50 }
					}
				}
			}
			
			# Political
			modifier = {
				factor = 0.2
				any_vassal = {
					religion = ROOT
					controls_religion = yes
				}
			}
			modifier = {
				factor = 0.1
				any_war = {
					using_cb = religious
					attacker = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 0.1
				any_war = {
					using_cb = pagan_holy_war
					attacker = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 0.1
				any_war = {
					using_cb = viking_invasion
					attacker = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 4
				any_war = {
					using_cb = religious
					defender = {
						character = ROOT
					}
					NOT = { war_score = 50 }
				}
			}
			modifier = {
				factor = 4
				any_war = {
					using_cb = crusade
					defender = {
						character = ROOT
					}
					NOT = { war_score = 50 }
				}
			}
			
			# Historical			
			modifier = {
				factor = 2
				NOT = { government = nomadic_government }  # We're already adopting civilized ways...
				NOT = { government = tribal_government }
			}
			modifier = {
				factor = 0.2
				OR = {
					culture_group = baltic
					culture_group = finno_ugric  # The most stubborn pagans
				}
				
			}
			modifier = {
				factor = 0.2
				culture_group = east_slavic # Like alcohol
				FROM = {
					religion_group = muslim
				}
			}
			modifier = {
				factor = 0.2
				culture_group = north_germanic # Vikings do like their alcohol
				FROM = {
					religion_group = muslim
				}
			}
			modifier = {
				factor = 0.2
				religion = bon
			}
			
			# Pragmatism
			modifier = {
				factor = 3  # Powerful rulers want a modern religion
				tier = KING
				realm_size = 12
			}
			modifier = {
				factor = 5
				is_reformed_religion = no
				primary_title = { has_law = tribal_organization_4 }  # Need it to reform government
				capital_holding = {
					OR = {
						AND = {
							location = {
								port = yes
							}
							OR = {
								AND = {
									holding_type = tribal
									has_building = tb_market_town_4
								}
								holding_type = city
							}
						}
						AND = {
							holding_type = tribal
							has_building = tb_hillfort_4
						}
						holding_type = castle
					}
				}
			}
			modifier = {
				factor = 0
				is_reformed_religion = yes
			}
			modifier = {
				factor = 0.3
				is_reformed_religion = no
				OR = {
					AND = {
						any_realm_title = {
							count = 3 
							is_holy_site = ROOT  # Close to reforming own religion instead
						}
						religion_authority = 0.4
					}
					religion_authority = 0.65 # Just very high authority, doing well
				}
			}
			modifier = {
				factor = 2
				any_realm_province = {
					any_neighbor_province = {
						owner = {
							top_liege = {
								religion = FROM
								relative_power = { who = ROOT power = 2.0 } # Powerful neighbor of that religion
							}
						}
					}
				}
			}
			modifier = {
				factor = 0.2
				NOR = {
					religion = tengri_pagan
					religion = aztec
					any_realm_province = {
						any_neighbor_province = {
							owner = {
								top_liege = {
									NAND = {
										religion_group = pagan_group
										is_reformed_religion = no
									}
									any_realm_province = { TECH_RECRUITMENT = 4 } # More cocky when pagan homeland attrition effect is active against neighbors
								}
							}
						}
					}
				}
			}

			# Realm stability
			modifier = {
				factor = 10
				num_of_vassals = 3
				NOT = {
					any_vassal = {
						NOT = { religion = FROM }
					}
				}
			}
			modifier = {
				factor = 10
				NOT = {
					any_realm_province = {
						NOT = { religion = FROM }
					}
				}
			}
			modifier = {
				factor = 0.3
				NOT = {
					any_realm_province = {
						religion = FROM
					}
				}
			}
			modifier = {
				factor = 0.3
				any_vassal = {
					NOT = { opinion = { who = ROOT value = 25 } }
					NOT = { religion = FROM }
				}
			}
			modifier = {
				factor = 0.3
				any_war = {
					NOT  = {
						using_cb = religious
						defender = {
							character = ROOT
						}
					}
					NOT  = {
						using_cb = crusade
						defender = {
							character = ROOT
						}
					}
					NOT = { war_score = 50 }
				}
			}
			modifier = {
				factor = 0.3
				any_war = {
					NOT  = {
						using_cb = religious
						defender = {
							character = ROOT
						}
					}
					NOT  = {
						using_cb = crusade
						defender = {
							character = ROOT
						}
					}
					NOT = { war_score = 10 }
				}
			}
		}
		
		if = {
			limit = {
				trait = cynical
				NOT = { trait = zealous }
				age = 12
			}
			random = {
				chance = 60
				add_trait = sympathy_pagans
			}
		}
		if = {
			limit = {
				NOR = {
					trait = cynical
					trait = zealous
				}
				age = 12
			}
			random = {
				chance = 50
				add_trait = sympathy_pagans
			}
		}		
		
		religion = FROM
		prestige = -500
		piety = 250
		
		if = {
			limit = { ai = yes }
			capital_scope = { religion = FROM }
		}
		
		any_courtier = {
			limit = { is_close_relative = ROOT }
			religion = FROM
		}
		any_spouse = {
			limit = { is_consort = no }
			religion = FROM
		}
		create_random_priest = {
			random_traits = yes
			dynasty = none
			culture = ROOT
			religion = FROM
			female = no
			age = 32
			attributes = {
				learning = 20
				diplomacy = 10
			}
		}
		new_character = {
			give_job_title = job_spiritual
			save_event_target_as = convert_lord_spiritual
		}
		hidden_tooltip = {
			any_vassal = {
				limit = {
					NOT = { religion = ROOT }
					ROOT = { ai = yes } # Only for AI!
				}
				letter_event = { id = 39617 } # Send out letter to vassals
			}
			FROM = {
				character_event = { id = 39614 days = 1 } # Notify liege of the the proselytizer who converted you
			}
		}
		custom_tooltip = { text = preacher_convert }
	}
	option = {
		name = EVTOPTB39601
		ai_chance = {
			factor = 1
		}
		
		FROM = {
			liege = {
				opinion = {
					modifier = opinion_banished_missionary
					who = ROOT
				}
				hidden_tooltip = {
					reverse_opinion = {
						modifier = opinion_sent_preacher
						who = ROOT
					}
				}
			}
			hidden_tooltip = {
				character_event = { id = 39613 days = 1 }
			}
		}
		custom_tooltip = { text = preacher_banished }
	}
}

# Vassals receive letter
letter_event = {
	id = 39617
	desc = EVTDESC_39617
	border = GFX_event_letter_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_39617 # Convert
		trigger = { NOT = { trait = god } }
		ai_chance = {
			factor = 1
			
			# Traits
			modifier = {
				factor = 0.3
				trait = zealous
			}
			modifier = {
				factor = 3
				trait = cynical
			}
			modifier = {
				factor = 2
				trait = arbitrary
			}
			modifier = {
				factor = 0
				relative_power = { who = FROM power = 1.0 } # Very powerful vassal who is also zealous NEVER accepts
				trait = zealous
			}
			
			# Personal
			modifier = {
				factor = 0.3
				FROM = {
					is_rival = ROOT
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					any_spouse = {
						religion = FROM
						reverse_opinion = { who = ROOT value = 50 }
					}
					any_consort = {
						religion = FROM
						reverse_opinion = { who = ROOT value = 50 }
					}
					any_lover = {
						religion = FROM
						reverse_opinion = { who = ROOT value = 50 }
					}
					any_child = {
						religion = FROM
						reverse_opinion = { who = ROOT value = 50 }
					}
				}
			}
			
			# Historical			
			modifier = {
				factor = 2
				NOT = { government = nomadic_government }  # We're already adopting civilized ways...
				NOT = { government = tribal_government }
			}
			modifier = {
				factor = 0.2
				OR = {
					culture = old_saxon
					culture_group = baltic
					culture_group = finno_ugric  # The most stubborn pagans
				}
			}
			modifier = {
				factor = 0.2
				culture_group = east_slavic # Like alcohol
				FROM = {
					religion_group = muslim
				}
			}
			modifier = {
				factor = 0.2
				culture_group = north_germanic # Vikings do like their alcohol
				FROM = {
					religion_group = muslim
				}
			}
		}
		
		prestige = -250
		religion = FROM
		any_courtier = {
			limit = { is_close_relative = ROOT }
			religion = FROM
		}
		any_spouse = {
			limit = { is_consort = no }
			religion = FROM
		}
		create_random_priest = {
			random_traits = yes
			dynasty = none
			culture = ROOT
			religion = FROM
			female = no
			attributes = {
				learning = 20
				diplomacy = 10
			}
		}
		new_character = {
			give_job_title = job_spiritual
		}
	}
	option = {
		name = EVTOPTB_39617 # Don't convert
		ai_chance = {
			factor = 1
		}
		piety = 100
	}
	option = {
		name = EVTOPTC_39617 # Respond with anger
		ai_chance = {
			factor = 0
		}
		prestige = 100
		piety = 100
		reverse_opinion = {
			modifier = opinion_angry
			who = ROOT
			years = 5
		}
	}
}

# Courtier converts (hidden)
character_event = {
	id = 39610
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = { NOT = { trait = god } }
	
	immediate = {
		if = {
			limit = {
				trait = cynical
				NOT = { trait = zealous }
				age = 12
			}
			random = {
				chance = 60
				add_trait = sympathy_pagans
			}
		}
		if = {
			limit = {
				NOT = { 
					trait = cynical 
					trait = zealous 
				}
				age = 12
			}
			random = {
				chance = 50
				add_trait = sympathy_pagans
			}
		}
		religion = FROM
		liege = {
			character_event = { id = 39602 }
		}
	}
}

character_event = {
	id = MNM.3912
	desc = EVTDESC_MNM_3912
	picture = GFX_evt_ritual_scroll
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		society = {
			random_society_member = {
				limit = {
					NOT = { character = ROOT }
					same_realm = ROOT
					OR = {
						AND = {
							society_rank > 1
							ROOT = { society_rank == 1 }
						}
						AND = {
							society_rank > 2
							ROOT = { society_rank == 2 }
						}
						AND = {
							society_rank > 3
							ROOT = { society_rank == 3 }
						}
					}
				}
				save_event_target_as = society_art_observer
			}
			if = {
				limit = {
					NOT = { event_target:society_art_observer = { always = yes } }
				}
				random_society_member = {
					limit = {
						NOT = { character = ROOT }
						same_realm = ROOT
					}
					save_event_target_as = society_art_observer
				}
			}
		}
		# Determine, painting or icon
		if = {
			limit = { 
				secret_religion_group = christian
				NOT = { secret_religion = iconoclast }
			}
			random = {
				chance = 5
				modifier = {
					factor = 2
					trait = zealous
				}
				modifier = {
					factor = 2
					trait = honest
				}
				set_character_flag = paint_icon
			}
		}
	}
	
	option = {
		name = EVTOPTA_3912
		if = {
			limit = { has_character_flag = paint_icon }
			add_artifact = religious_icon
			hidden_tooltip = { clr_character_flag = paint_icon }
		}
		else = {
			add_artifact = magnificent_painting
		}
		add_society_currency_minor_effect = yes
		
		event_target:society_art_observer = {
			opinion = {
				who = ROOT
				modifier = opinion_budding_friendship
				years = 10
			}
			reverse_opinion = {
				who = ROOT
				modifier = opinion_budding_friendship
				years = 10
			}
		}
	}
}

character_event = {
	id = 39240
	desc = "EVTDESC39240"	#Pope asks a ruler that they should not have heathens employed.
	picture = GFX_evt_heretic
	border = GFX_event_normal_frame_religion
	
	min_age = 16
	only_capable = yes
	prisoner = no
	only_men = yes
	only_playable = yes
	religion_group = christian
	war = no
	
	trigger = {
		controls_religion = yes
		OR = {
			religion = catholic
			religion = fraticelli
		}
		
		religion_authority = 0.20

		any_playable_ruler = {
			religion = ROOT
			rightful_religious_head = ROOT
			NOT = { has_character_flag = pope_dislikes_heathen_employed }
			any_courtier = {
				prisoner = no
				OR = {
					religion_group = muslim
					religion_group = pagan_group
					religion_group = other_group
				}
				OR = {
					has_job_title = job_chancellor
					has_job_title = job_marshal
					has_job_title = job_treasurer
					has_job_title = job_spymaster
					has_job_title = job_spiritual
				} 
			}
		}
	}
	
	mean_time_to_happen = {
		months = 50
		modifier = {
			factor = 0.25
			trait = zealous
		}
	}

	option = {
		name = "EVTOPTA39240"	#ask them
		ai_chance = { factor = 100 }
		random_playable_ruler = {
			limit = {
				religion = ROOT
				rightful_religious_head = ROOT
				NOT = { has_character_flag = pope_dislikes_heathen_employed }

				any_courtier = {
					prisoner = no
					OR = {
						religion_group = muslim
						religion_group = pagan_group
						religion_group = other_group
					}
					OR = {
						has_job_title = job_chancellor
						has_job_title = job_marshal
						has_job_title = job_treasurer
						has_job_title = job_spymaster
						has_job_title = job_spiritual
					} 
				}
			}
			character_event = { id = 39241 days = 14 tooltip = EVTTOOLTIP392401 }
			set_character_flag = pope_dislikes_heathen_employed
		}
	}

	option = {
		name = "EVTOPTB39240"	#ignore it.
		ai_chance = { factor = 0 }
		religion_authority = {
			modifier = head_of_religion_neglect
			years = 10
		}
	}
}

# Arriving for the great holy war - non-norse Pagans and Jews
character_event = {
	id = 8469
	desc = "EVTDESC8300"
	picture = "GFX_evt_battle"
	border = GFX_event_normal_frame_war
	
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		OR = {
			religion_group = pagan_group
			religion_group = jewish_group
			religion_group = zoroastrian_group
			religion_group = other_group
		}
		NOR = {
			religion = norse_pagan
			religion = norse_pagan_reformed
		}
		has_crusade_trait_trigger = no
		in_command = yes
		OR = {
			AND = {
				any_war = {
					using_cb = crusade
				}
				crusade_target = {
					is_located_in = ROOT
				}
			}
			any_liege = {
				religion = ROOT
				any_war = {
					using_cb = crusade
				}
				crusade_target = {
					is_located_in = ROOT
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "8469.a"
		add_crusade_trait_effect = yes
	}
}